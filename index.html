<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>34 DIVERSE // SIGNAL_CLEANER</title>
    <style>
        body { background-color: #050a14; color: #60a5fa; font-family: 'Courier New', monospace; padding: 20px; }
        .terminal-header { border-bottom: 2px solid #1e3a8a; padding-bottom: 20px; text-align: center; position: sticky; top: 0; background: #050a14; z-index: 100; }
        h1 { color: #22c55e; letter-spacing: 5px; text-shadow: 0 0 10px #22c55e; margin: 0; }
        #query { background: #0d1626; border: 1px solid #1e3a8a; color: #22c55e; padding: 12px; width: 300px; outline: none; }
        .btn { background: #1e3a8a; color: white; border: 1px solid #60a5fa; padding: 12px 25px; cursor: pointer; font-weight: bold; }
        
        #intel-feed { margin-top: 30px; display: grid; grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); gap: 20px; }
        .result-card { border: 1px solid #1e3a8a; background: #000; overflow: hidden; display: flex; flex-direction: column; transition: 0.3s; }
        .result-card:hover { border-color: #22c55e; box-shadow: 0 0 10px rgba(34, 197, 94, 0.4); }
        
        .video-viewport { width: 100%; position: relative; padding-top: 56.25%; background: #050a14; }
        .video-viewport iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }

        .card-content { padding: 15px; background: rgba(13, 22, 38, 0.9); }
        .result-title { color: #22c55e; font-size: 14px; text-decoration: none; font-weight: bold; }
        
        #pagination-control { text-align: center; padding: 40px; display: none; }
        .load-btn { background: #22c55e; color: #050a14; border: none; padding: 15px 40px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <div class="terminal-header">
        <h1>34 DIVERSE</h1>
        <p>> [STATUS]: <span style="color: #22c55e;">CACHE_BUSTER_ENABLED</span> | <span id="status-msg">READY</span></p>
        <input type="text" id="query" placeholder="IDENTIFY NEW TARGET...">
        <button class="btn" onclick="initialSearch()">START EXTRACTION</button>
    </div>

    <div id="intel-feed"></div>

    <div id="pagination-control">
        <button class="load-btn" onclick="fetchMore()">REQUEST NEXT WAVE</button>
    </div>

    <script>
        let currentOffset = 0;
        let lastQuery = "";

        function initialSearch() {
            const q = document.getElementById('query').value;
            if(!q) return;
            lastQuery = q;
            currentOffset = 0;
            document.getElementById('intel-feed').innerHTML = "";
            document.getElementById('status-msg').innerText = "CLEANING CACHE...";
            executeBreach();
        }

        async function fetchMore() {
            currentOffset += 30;
            executeBreach();
        }

        async function executeBreach() {
            const feed = document.getElementById('intel-feed');
            
            // THE CACHE BUSTER: We add a random number so the proxy doesn't serve old data
            const cacheBuster = Math.floor(Math.random() * 99999);
            const searchUrl = `https://html.duckduckgo.com/html/?q=${encodeURIComponent(lastQuery + " site:youtube.com OR site:dailymotion.com")}&s=${currentOffset}&dc=${currentOffset + 1}&v=${cacheBuster}`;
            
            const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(searchUrl)}&cb=${cacheBuster}`;

            try {
                const response = await fetch(proxyUrl);
                const data = await response.json();
                const parser = new DOMParser();
                const doc = parser.parseFromString(data.contents, 'text/html');
                const results = doc.querySelectorAll('.result');

                document.getElementById('status-msg').innerText = "DATA EXTRACTED";

                results.forEach(res => {
                    const titleLink = res.querySelector('.result__a');
                    if(titleLink) {
                        let rawHref = titleLink.getAttribute('href');
                        let cleanUrl = rawHref.includes('uddg=') ? decodeURIComponent(rawHref.split('uddg=')[1].split('&')[0]) : rawHref;
                        
                        let embedUrl = "";
                        if (cleanUrl.includes("youtube.com/watch?v=")) {
                            const id = cleanUrl.split("v=")[1].split("&")[0];
                            embedUrl = `https://www.youtube.com/embed/${id}`;
                        } else if (cleanUrl.includes("dailymotion.com/video/")) {
                            const id = cleanUrl.split("/video/")[1].split("?")[0];
                            embedUrl = `https://www.dailymotion.com/embed/video/${id}`;
                        }

                        if (embedUrl) {
                            const card = document.createElement('div');
                            card.className = 'result-card';
                            card.innerHTML = `<div class="video-viewport"><iframe src="${embedUrl}" allowfullscreen></iframe></div>
                                <div class="card-content"><a class="result-title" href="${cleanUrl}" target="_blank">${titleLink.innerText}</a></div>`;
                            feed.appendChild(card);
                        }
                    }
                });

                document.getElementById('pagination-control').style.display = "block";

            } catch (e) {
                document.getElementById('status-msg').innerText = "SIGNAL ERROR";
            }
        }
    </script>
</body>
</html>
